<html lang='en'>

  <head>
    <meta charset='UTF-8' />
    <meta name='viewport' content='width=device-width, initial-scale=1.0' />
    <title>Regvis Report</title>

    <style>
        body {
          font-family: Arial, Helvetica, sans-serif;
        }

        .component[data-status='changed'],
        .component[data-status='added'],
        .component[data-status='deleted'] {
          cursor: pointer;
        }

        .component.status-closed .shots {
          display: none;
        }

        .component.status-open .shots {
          display: block;
        }

        .status {
          display: inline-block;
          text-transform: uppercase;
          padding: .2em .7em;
          font-size: .8em;
          margin-right: 1em;
          border-radius: 5px;
        }

       .status.ok {
        background-color: gray;
        color: #ffffff;
       }

        .status.deleted {
        background-color: red;
        color: #fff;
       }

        .status.added {
          background-color: green;
          color: #fff;
        }

        .status.changed {
        background-color: rgb(179, 0, 111);
        color: #fff;
       }
    </style>
  </head>

  <body>
    <ul>
      {{#componentsDiff}}
        <li class="component status-closed" data-status='{{status}}'>
          <span class="status {{status}}">{{status}}</span>
          {{id}}
          <div class="shots">
          {{#ifEquals status 'ok'}}
            <img src='../screenshots/{{../featureBranchHash}}/{{id}}.png' />
          {{/ifEquals}}

          {{#ifEquals status 'added'}}
            <img src='../screenshots/{{../featureBranchHash}}/{{id}}.png' />
          {{/ifEquals}}

          {{#ifEquals status 'deleted'}}
            <img src='../screenshots/{{../baselineBranchHash}}/{{id}}.png' />
          {{/ifEquals}}

           {{#ifEquals status 'changed'}}
            <img src='../screenshots/{{../baselineBranchHash}}/{{id}}.png' />
            <img src='../screenshots/{{../featureBranchHash}}/{{id}}.png' />
            <img src='./{{../diffId}}/{{id}}.png' />
          {{/ifEquals}}
          </div>
        </li>
      {{/componentsDiff}}
    </ul>

    <script>
      const listItems  = document.querySelectorAll('li')
      for(listitem of listItems) {
        listitem.addEventListener('click', e => {
          if(e.target.classList.contains('status-closed')) {
            e.target.classList.replace('status-closed', 'status-open')
          } else {
            e.target.classList.replace('status-open', 'status-closed')
          }
        })
      }
     
    </script>
  </body>

</html>